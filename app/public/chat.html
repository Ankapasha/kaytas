<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title data-i18n="page_title">Chat â€” Kaytas</title>

  <style>
    :root {
      --bg: #f5f6f8;
      --card: #ffffff;
      --muted: #7a7a7a;
      --accent: #1976d2;
      --bubble-me: #1976d2;
      --bubble-other: #e9ecef;
      --text-me: #fff;
      --text-other: #222;
    }

    body {
      height: 100%;
      margin: 0;
      background: var(--bg);
      font-family: system-ui, Segoe UI, Roboto, Arial;
    }

    /* Language dropdown */
    #langBox {
      text-align: right;
      padding: 10px 14px 0 14px;
    }
    #langSwitcher {
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    .page-wrapper {
      max-width: 1200px;
      margin: 20px auto;
      padding: 0 16px;
      display: flex;
      gap: 20px;
      height: calc(100vh - 40px);
    }

    .panel {
      background: var(--card);
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(15,20,25,0.05);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .conversations {
      width: 34%;
      display: flex;
    }

    .conv-search {
      padding: 12px;
      border-bottom: 1px solid #eee;
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .conv-search input {
      flex: 1;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ddd;
    }

    .conv-list {
      overflow: auto;
      flex: 1;
    }

    .conv-item {
      display: flex;
      gap: 12px;
      padding: 12px;
      border-bottom: 1px solid #f1f1f1;
      cursor: pointer;
      align-items: center;
      position: relative;
    }

    .conv-item:hover {
      background: #fbfbfb;
    }

    .conv-thumb {
      width: 64px;
      height: 52px;
      background: #ddd;
      border-radius: 6px;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      color: #555;
    }

    .chat {
      flex: 1;
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .chat-header {
      padding: 14px 18px;
      border-bottom: 1px solid #eee;
      display: flex;
      align-items: center;
      gap: 12px;
      background: #fff;
    }

    .chat-title {
      font-weight: 700;
      font-size: 16px;
    }

    .chat-ad {
      font-size: 13px;
      color: var(--muted);
    }

    .messages {
      flex: 1;
      padding: 18px;
      overflow: auto;
      background: linear-gradient(#fbfcfd, #f7f8fa);
    }

    .msg-row {
      display: flex;
      margin-bottom: 12px;
      align-items: flex-end;
    }

    .msg-row.me { justify-content: flex-end; }

    .bubble {
      max-width: 70%;
      padding: 10px 14px;
      border-radius: 14px;
      font-size: 14px;
      line-height: 1.3;
    }

    .bubble.me {
      background: var(--bubble-me);
      color: var(--text-me);
      border-bottom-right-radius: 6px;
    }

    .bubble.other {
      background: var(--bubble-other);
      color: var(--text-other);
      border-bottom-left-radius: 6px;
    }

    .composer {
      padding: 12px;
      border-top: 1px solid #eee;
      display: flex;
      gap: 8px;
      align-items: center;
      background: #fff;
    }

    .composer textarea {
      flex: 1;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ddd;
      resize: none;
      height: 56px;
      font-size: 14px;
    }

    .send-btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 12px 14px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 700;
      min-width: 100px;
    }

    @media (max-width: 900px) {
      .page-wrapper { flex-direction: column; height: auto; }
      .conversations { width: 100%; height: 220px; }
      .chat { height: calc(100vh - 300px); }
    }
  </style>
</head>

<body>

<!-- LANGUAGE DROPDOWN -->
<div id="langBox">
  <select id="langSwitcher">
    <option value="en">ðŸ‡¬ðŸ‡§ English</option>
    <option value="bs">ðŸ‡·ðŸ‡¸ Serbian (Latin)</option>
    <option value="de">ðŸ‡©ðŸ‡ª Deutsch</option>
    <option value="fr">ðŸ‡«ðŸ‡· FranÃ§ais</option>
    <option value="es">ðŸ‡ªðŸ‡¸ EspaÃ±ol</option>
    <option value="it">ðŸ‡®ðŸ‡¹ Italiano</option>
    <option value="sq">ðŸ‡¦ðŸ‡± Shqip</option>
  </select>
</div>

<div class="page-wrapper">

    <!-- LEFT: LIST -->
    <div class="panel conversations">
        <div class="conv-search">
            <input id="convSearch" data-i18n="search_placeholder" placeholder="Search conversation..."/>
        </div>

        <div class="conv-list" id="convList">
            <div style="padding:18px;color:var(--muted)" data-i18n="loading_conversations">
              Loading conversationsâ€¦
            </div>
        </div>
    </div>

    <!-- RIGHT: CHAT -->
    <div class="panel chat">
        <div class="chat-header">
            <div style="flex:1">
                <div class="chat-title" id="chatTitle" data-i18n="select_conversation">Select a conversation</div>
                <div class="chat-ad" id="chatAd"></div>
            </div>
        </div>

        <div class="messages" id="messages">
            <div style="padding:18px;color:var(--muted)" data-i18n="no_conversation">
              No conversation selected.
            </div>
        </div>

        <div class="composer">
            <textarea id="messageInput" rows="2" data-i18n="write_message" placeholder="Write a message..."></textarea>
            <button id="sendBtn" class="send-btn" data-i18n="send">Send</button>
        </div>
    </div>

</div>

<script>
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* LANGUAGE SYSTEM                               */
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const LANG = {
  en: {
    page_title: "Chat â€” Kaytas",
    search_placeholder: "Search conversation...",
    loading_conversations: "Loading conversationsâ€¦",
    select_conversation: "Select a conversation",
    no_conversation: "No conversation selected.",
    write_message: "Write a message...",
    send: "Send"
  },
  bs: {
    page_title: "Chat â€” Kaytas",
    search_placeholder: "PretraÅ¾i konverzaciju...",
    loading_conversations: "UÄitavanje konverzacijaâ€¦",
    select_conversation: "Odaberite konverzaciju",
    no_conversation: "Nema odabrane konverzacije.",
    write_message: "NapiÅ¡i poruku...",
    send: "PoÅ¡alji"
  },
  de: {
    page_title: "Chat â€” Kaytas",
    search_placeholder: "Konversation suchen...",
    loading_conversations: "Konversationen werden geladenâ€¦",
    select_conversation: "WÃ¤hle eine Konversation",
    no_conversation: "Keine Konversation ausgewÃ¤hlt.",
    write_message: "Nachricht schreiben...",
    send: "Senden"
  },
  fr: {
    page_title: "Chat â€” Kaytas",
    search_placeholder: "Rechercher une conversation...",
    loading_conversations: "Chargement des conversationsâ€¦",
    select_conversation: "SÃ©lectionnez une conversation",
    no_conversation: "Aucune conversation sÃ©lectionnÃ©e.",
    write_message: "Ã‰crire un message...",
    send: "Envoyer"
  },
  es: {
    page_title: "Chat â€” Kaytas",
    search_placeholder: "Buscar conversaciÃ³n...",
    loading_conversations: "Cargando conversacionesâ€¦",
    select_conversation: "Selecciona una conversaciÃ³n",
    no_conversation: "Ninguna conversaciÃ³n seleccionada.",
    write_message: "Escribe un mensaje...",
    send: "Enviar"
  },
  it: {
    page_title: "Chat â€” Kaytas",
    search_placeholder: "Cerca conversazione...",
    loading_conversations: "Caricamento conversazioniâ€¦",
    select_conversation: "Seleziona una conversazione",
    no_conversation: "Nessuna conversazione selezionata.",
    write_message: "Scrivi un messaggio...",
    send: "Invia"
  },
  sq: {
    page_title: "Chat â€” Kaytas",
    search_placeholder: "KÃ«rko bisedÃ«n...",
    loading_conversations: "Duke ngarkuar bisedatâ€¦",
    select_conversation: "Zgjidh njÃ« bisedÃ«",
    no_conversation: "AsnjÃ« bisedÃ« e zgjedhur.",
    write_message: "Shkruaj njÃ« mesazh...",
    send: "DÃ«rgo"
  }
};

function currentLang() {
  return localStorage.getItem("lang") || "en";
}

function applyLanguage(lang) {
  if (!LANG[lang]) lang = "en";
  localStorage.setItem("lang", lang);

  const dict = LANG[lang];
  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.getAttribute("data-i18n");
    if (dict[key]) el.textContent = dict[key];
    if (el.placeholder && dict[key]) el.placeholder = dict[key];
  });

  document.title = dict.page_title;
}

function initLanguage() {
  let saved = currentLang();
  const switcher = document.getElementById("langSwitcher");
  if (switcher) {
    switcher.value = saved;
    switcher.addEventListener("change", e => applyLanguage(e.target.value));
  }
  applyLanguage(saved);
}

/* Initialize language immediately */
initLanguage();

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* BACKEND CHAT LOGIC â€” USES YOUR EXISTING CODE */
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

/// YOUR ORIGINAL CHAT JAVASCRIPT CODE INSERTED HERE
/// (I didnâ€™t touch anything â€” only language layer added)

</script>

</body>
</html>
